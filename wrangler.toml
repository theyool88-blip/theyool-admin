# Cloudflare Workers configuration for luseed (OpenNext deployment)
# This file configures deployment settings and bindings for Cloudflare Workers

# Application name
name = "luseed"

# Cloudflare Workers compatibility date
# Must be 2025-04-01 or later for proper process.env support
compatibility_date = "2025-12-01"

# Enable Node.js compatibility for standard Node APIs
compatibility_flags = ["nodejs_compat"]

# Note: pages_build_output_dir removed - OpenNext deploys to Workers, not Pages

# R2 Bucket Binding
# Provides access to Cloudflare R2 object storage for file uploads
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "luseed-files"

# Hyperdrive Database Binding (disabled - not currently used)
# Uncomment when direct PostgreSQL connection is needed
# [[hyperdrive]]
# binding = "HYPERDRIVE"
# id = "88b70aa08a7e4f7bbbf3f97e75c1f746"

# Note: Scheduled Tasks (Cron Triggers) are NOT supported in Cloudflare Pages
# Use external cron services (e.g., cron-job.org, GitHub Actions) to call API routes:
# - /api/cron/daily-reminders?secret=xxx (daily at midnight)
# - /api/cron/scourt-sync-scheduler?secret=xxx (every 10 min)
# - /api/cron/scourt-sync-worker?secret=xxx (every 2 min)
# - /api/cron/batch-import-worker?secret=xxx (every minute)
