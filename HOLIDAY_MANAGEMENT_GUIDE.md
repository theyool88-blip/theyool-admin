# 공휴일 관리 시스템 가이드

**버전**: 1.0
**작성일**: 2025-11-22

---

## 📋 개요

법정 기간 계산에 사용되는 한국 공휴일을 관리하는 시스템입니다.
매년 공휴일을 추가/수정/삭제할 수 있으며, 민법 제161조 적용에 필수적입니다.

---

## 🎯 사용 방법

### 1. 관리자 페이지 접속

```
http://localhost:3000/admin/holidays
```

### 2. 공휴일 관리 기능

#### ✅ 공휴일 추가
1. "+ 공휴일 추가" 버튼 클릭
2. 날짜 선택 (달력)
3. 공휴일명 입력 (예: "설날", "추석", "어린이날 대체공휴일")
4. "추가" 버튼 클릭

#### ✏️ 공휴일 수정
1. 수정할 공휴일의 "수정" 버튼 클릭
2. 날짜 또는 공휴일명 변경
3. "수정" 버튼 클릭

#### ❌ 공휴일 삭제
1. 삭제할 공휴일의 "삭제" 버튼 클릭
2. 확인 메시지에서 "확인" 클릭

#### 📅 연도별 필터링
- 상단 연도 선택 드롭다운으로 연도별 공휴일 조회
- 기본값: 올해
- 범위: 작년 ~ 3년 후

---

## 📆 매년 공휴일 추가 절차

### 방법 1: 관리자 UI 사용 (권장)

**시기**: 매년 12월 말 또는 1월 초

1. `/admin/holidays` 페이지 접속
2. 연도 선택 (예: 2026)
3. 다음 해 공휴일 하나씩 추가:
   - 신정 (1/1)
   - 설날 연휴 (음력 12/30, 1/1, 1/2)
   - 삼일절 (3/1)
   - 어린이날 (5/5)
   - 부처님오신날 (음력 4/8)
   - 현충일 (6/6)
   - 광복절 (8/15)
   - 추석 연휴 (음력 8/14, 8/15, 8/16)
   - 개천절 (10/3)
   - 한글날 (10/9)
   - 성탄절 (12/25)

4. 대체공휴일 정부 발표 후 추가
   - 예: "어린이날 대체공휴일 (5/6)"

### 방법 2: SQL 마이그레이션 사용

**시기**: 매년 12월 (연말 시스템 점검 시)

1. `supabase/migrations/20251201_add_2026_holidays.sql` 파일 확인
2. 연도와 날짜 수정 (음력 날짜는 양력 변환 후 입력)
3. Supabase SQL Editor에서 실행

**예시**:
```sql
INSERT INTO korean_public_holidays (holiday_date, holiday_name) VALUES
  ('2027-01-01', '신정'),
  ('2027-01-28', '설날 연휴'),
  ('2027-01-29', '설날'),
  ('2027-01-30', '설날 연휴'),
  -- ... 나머지 공휴일
ON CONFLICT (holiday_date) DO NOTHING;
```

---

## 🗓️ 2025년 공휴일 목록 (참고)

| 날짜 | 공휴일명 | 요일 |
|------|---------|------|
| 2025-01-01 | 신정 | 수 |
| 2025-01-28~30 | 설날 연휴 | 화~목 |
| 2025-03-01 | 삼일절 | 토 |
| 2025-03-03 | 삼일절 대체공휴일 | 월 |
| 2025-05-05 | 어린이날 | 월 |
| 2025-05-06 | 어린이날 대체공휴일 | 화 |
| 2025-06-06 | 현충일 | 금 |
| 2025-08-15 | 광복절 | 금 |
| 2025-10-03 | 개천절 | 금 |
| 2025-10-05~07 | 추석 연휴 | 일~화 |
| 2025-10-08 | 추석 대체공휴일 | 수 |
| 2025-10-09 | 한글날 | 목 |
| 2025-12-25 | 성탄절 | 목 |

**총 17개**

---

## 🔍 공휴일 확인 방법

### 1. 데이터베이스 직접 조회

```sql
SELECT * FROM korean_public_holidays
WHERE year = 2025
ORDER BY holiday_date;
```

### 2. API 호출

```bash
# 2025년 공휴일 조회
curl http://localhost:3000/api/admin/holidays?year=2025
```

### 3. TypeScript 함수 사용

```typescript
import { isPublicHoliday } from '@/lib/utils/korean-legal-dates';

const date = new Date('2025-10-06'); // 추석
console.log(isPublicHoliday(date)); // true
```

---

## 📚 참고 자료

### 법정 공휴일 출처
- [관공서의 공휴일에 관한 규정](https://www.law.go.kr/lsInfoP.do?lsiSeq=218485)
- [행정안전부 공휴일 안내](https://www.mois.go.kr)
- [한국천문연구원 (음력 양력 변환)](https://astro.kasi.re.kr/life/pageView/8)

### 대체공휴일 규정
- 설날, 추석: 연휴 중 공휴일이 토요일 또는 일요일과 겹치는 경우 대체공휴일 지정
- 어린이날, 삼일절, 광복절, 개천절, 한글날: 일요일과 겹치는 경우 대체공휴일 지정

---

## ⚠️ 주의사항

### 1. 음력 날짜 변환 필수
- 설날, 추석, 부처님오신날은 **음력 기준**
- 매년 양력 날짜가 다르므로 한국천문연구원에서 확인 후 입력
- 예: 2025년 설날 = 1월 29일, 2026년 설날 = 2월 17일

### 2. 대체공휴일 확인
- 정부 발표 후 확정되므로 연말에 추가 확인 필요
- 주말과 겹치는 경우 자동 생성되지 않음

### 3. 일요일은 자동 공휴일
- 일요일은 시스템에서 자동으로 공휴일 처리
- 별도로 등록할 필요 없음

### 4. 과거 공휴일 삭제 금지
- 과거 법정 기간 계산에 영향을 줄 수 있음
- 잘못 입력된 경우만 삭제

---

## 🛠️ 트러블슈팅

### Q1: 공휴일 추가 시 "이미 존재합니다" 에러

**A**: 해당 날짜의 공휴일이 이미 등록되어 있습니다.
- 수정 기능을 사용하거나
- 기존 공휴일을 삭제 후 다시 추가

### Q2: 연도별 필터링이 안 됩니다

**A**: 브라우저 캐시를 지우고 페이지 새로고침 (Cmd + Shift + R)

### Q3: 2026년 공휴일은 언제 추가하나요?

**A**:
- **권장**: 2025년 12월 말
- **최소**: 2026년 1월 5일 이전
- 이유: 1월 첫 주에 법정 기간 계산이 발생할 수 있음

---

## 📞 문의

- **시스템 관련**: admin@theyool.com
- **법률 검토**: 법무법인 더율 변호사팀

---

**버전 히스토리**:
- v1.0 (2025-11-22): 최초 작성
