<?xml version="1.0" encoding="UTF-8"?>
<!--
SSGO003F20(심리진행현황 목록) 화면 XML

============ ============ ==========================
 Date         Author       Description
============ ============ ==========================
2022.05.12.   최연구       [NELS]최초 생성
============ ============ ==========================
-->
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
   <head meta_screenName="심리진행현황 목록" >
    	<w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data xmlns="" />
            </xf:instance>
            <w2:dataCollection baseNode="map">
                <!-- 심리진행현황 -->
                <w2:dataList baseNode="list" repeatNode="map" id="dlt_hrngProgCurst" saveRemovedData="true">
                    <w2:columnInfo>
                        <w2:column id="progYmd" name="진행일자" dataType="text"></w2:column>
                        <w2:column id="progDvsNm" name="진행구분명" dataType="text"></w2:column>
                        <w2:column id="progDts" name="진행내용" dataType="text"></w2:column>
                        <w2:column id="progRslt" name="진행결과" dataType="text"></w2:column>
                        <w2:column id="progTyp" name="진행타입" dataType="text"></w2:column>
                    </w2:columnInfo>
                </w2:dataList>
            </w2:dataCollection>
            <w2:workflowCollection>
            </w2:workflowCollection>
        </xf:model>
         <script type="text/javascript" lazy="false"><![CDATA[/**
 * 화면 pageload 이벤트
 *
 * ============ ============ ==========================
 *  Date         Author       Description
 * ============ ============ ==========================
 * 2022.05.10.   최연구       [NELS]최초생성
 * ============ ============ ==========================
 */ 
scwin.onpageload = function() {
    var dlt_param   = com.data.getParameter() || ssgo.getParameter();
    
    dlt_hrngProgCurst.removeAll();
    dlt_hrngProgCurst.setJSON(dlt_param);

    // 그리드 사이즈조정시 캔버스뒤로 숨는 오류처리
    ssgo.setGrdResizeAddEvt(grd_hrngProgCurst);       
};

/**
 * 화면 pageunload 이벤트
 *
 * ============ ============ ==========================
 *  Date         Author       Description
 * ============ ============ ==========================
 * 2022.05.10.   최연구       [NELS]최초생성
 * ============ ============ ==========================
 */
scwin.onpageunload = function() {
};

/**
 * 그리드 내용필드 expression
 *
 * ============ ============ ==========================
 *  Date         Author       Description
 * ============ ============ ==========================
 * 2022.05.04.   최연구       [NELS]최초생성
 * ============ ============ ==========================
 */
scwin.setCttappltHrngProgLst = function (colIdx) {
    var gridObj   = dlt_hrngProgCurst;
    var progDvsNm = gridObj.getCellData(colIdx, "progDvsNm");
    var progDts   = gridObj.getCellData(colIdx, "progDts");
    var progTyp   = gridObj.getCellData(colIdx, "progTyp");
    var progRslt  = "";
    
    if(!scutilo.isEmpty(gridObj.getCellData(colIdx, "progRslt")) && progTyp == "3" ){
        progRslt = gridObj.getCellData(colIdx, "progRslt").indexOf('(') > -1 ? gridObj.getCellData(colIdx, "progRslt") : "(" + gridObj.getCellData(colIdx, "progRslt") + ")";
    } else if (!scutilo.isEmpty(gridObj.getCellData(colIdx, "progRslt")) && !progTyp.startsWith("4")) {
        progRslt = gridObj.getCellData(colIdx, "progRslt");
    } else {
        progRslt = "";
    }

    var csDvsCd = $p.parent().dma_search.get("csDvsCd");
    var comTaskTypCd = ssgo.getProperties("ctt.csDvsCd." + csDvsCd);
    var retval = "";

    if(comTaskTypCd == scglblo.TASK.CV
        ||comTaskTypCd == scglblo.TASK.KS
        ||comTaskTypCd == scglblo.TASK.HS 
        ||comTaskTypCd == scglblo.TASK.PT){ // 본안사무
        if(progTyp == "3" ){
            retval = progDts + progRslt;
        } else {
            retval = progDvsNm + progDts + progRslt;
        }
        
    } else {
        retval = progDvsNm + progDts + progRslt;
    }
    
    return retval;
}]]></script>
	<style type="text/css"><![CDATA[
			
		 ]]></style>
    </head>
   <body ev:onpageload="scwin.onpageload" ev:onpageunload="scwin.onpageunload">

   	<w2:span class="con_stit ic pt10" id="" label="심리진행현황" style=""></w2:span>
   	<w2:gridView adaptive="" adaptiveThreshold="" autoFitMinWidth="" captionTitle="심리진행현황 그리드" class="grid" contextMenu=""
   		dataList="data:dlt_hrngProgCurst" id="grd_hrngProgCurst" style="height:110px;" visibleRowNum="all" noResultMessage="조회된 내용이 없습니다." autoFit="none" titleFormatter="ssgo.setGrdTitle">
   		<w2:caption id="caption1" style="" value="this is a grid caption."></w2:caption>
   		<w2:header id="header1" style="">
   			<w2:row id="row1" style="">
   				<w2:column displayMode="label" id="column19" inputType="text" value="일자" style="height:20px;" width="30"></w2:column>
   				<w2:column displayMode="label" id="column15" inputType="text" value="내용" style="height:20px;" width="90"></w2:column>
   			</w2:row>
   		</w2:header>
   		<w2:gBody id="gBody1" style="">
   			<w2:row id="row2" style="">
   				<w2:column displayMode="label" excelCellType="" id="progYmd" inputType="text" style="" readOnly="true" displayFormat="####.##.##"></w2:column>
   				<w2:column displayMode="label" id="progDts" inputType="expression" style="" textAlign="left"
   					expression="scwin.setCttappltHrngProgLst(rowIndex())">
   				</w2:column>
   			</w2:row>
   		</w2:gBody>
   	</w2:gridView>


   </body>
</html>
