# Cloudflare Pages configuration for luseed
# This file configures deployment settings, bindings, and scheduled tasks

# Application name (must match Cloudflare Pages project name)
name = "luseed"

# Cloudflare Workers compatibility date
# Controls which runtime features and behaviors are available
compatibility_date = "2025-12-01"

# Enable Node.js compatibility for standard Node APIs
compatibility_flags = ["nodejs_compat"]

# OpenNext build output directory for Next.js on Cloudflare
# This is where the OpenNext adapter places the compiled application
pages_build_output_dir = ".open-next"

# R2 Bucket Binding
# Provides access to Cloudflare R2 object storage for file uploads
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "luseed-files"

# Hyperdrive Database Binding
# Accelerates database connections via Cloudflare's connection pooling
# Note: The actual Hyperdrive ID must be configured after creating the Hyperdrive config
[[hyperdrive]]
binding = "HYPERDRIVE"
id = "88b70aa08a7e4f7bbbf3f97e75c1f746"

# Note: Scheduled Tasks (Cron Triggers) are NOT supported in Cloudflare Pages
# Use external cron services (e.g., cron-job.org, GitHub Actions) to call API routes:
# - /api/cron/daily-reminders?secret=xxx (daily at midnight)
# - /api/cron/scourt-sync-scheduler?secret=xxx (every 10 min)
# - /api/cron/scourt-sync-worker?secret=xxx (every 2 min)
# - /api/cron/batch-import-worker?secret=xxx (every minute)
